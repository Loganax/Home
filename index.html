<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOSC - Tecniche Tattiche e Procedure</title>
    <link rel="stylesheet" href="style.css">
</head>
<div class="print-buttons">
    <button onclick="printCurrentPage()" class="btn-print">
        <span class="btn-icon">ðŸ“„</span> Stampa Pagina
    </button>
    <button onclick="printManual()" class="btn-print btn-manual">
        <span class="btn-icon">ðŸ“š</span> Stampa Manuale
    </button>
</div>
<!-- HTML - Da inserire prima del closing </body> in ogni pagina -->
<div class="print-buttons">
    <button onclick="printCurrentPage()" class="btn-print">
        <span class="btn-icon">ðŸ“„</span> Stampa Pagina
    </button>
    <button onclick="printManual()" class="btn-print btn-manual">
        <span class="btn-icon">ðŸ“š</span> Stampa Manuale
    </button>
</div>

<script>
// Funzione per stampare la pagina corrente (converte in PDF)
function printCurrentPage() {
    window.print();
}

// Funzione per stampare l'intero manuale
function printManual() {
    // Array con tutte le pagine del manuale in ordine
    const pages = [
        'index.html',
        'nosc_index.html',
        'lime_acquisition.html'
        // Aggiungi qui altre pagine future
    ];
    
    // Crea una nuova finestra
    const printWindow = window.open('', '_blank');
    
    // Inizializza il documento
    printWindow.document.write(`
        <!DOCTYPE html>
        <html lang="it">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>NOSC - Manuale Completo</title>
            <link rel="stylesheet" href="style.css">
            <style>
                @media print {
                    .print-buttons { display: none !important; }
                }
            </style>
        </head>
        <body>
    `);
    
    // Variabile per tracciare le pagine caricate
    let loadedPages = 0;
    
    // Carica e aggiungi ogni pagina
    pages.forEach((page, index) => {
        fetch(page)
            .then(response => {
                if (!response.ok) {
                    throw new Error('HTTP error! status: ' + response.status);
                }
                return response.text();
            })
            .then(html => {
                // Estrai il contenuto della pagina
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Cerca sia .page che .cover-page
                let pageContent = doc.querySelector('.page') || doc.querySelector('.cover-page');
                
                if (pageContent) {
                    // Rimuovi i bottoni di stampa se presenti
                    const buttons = pageContent.querySelector('.print-buttons');
                    if (buttons) buttons.remove();
                    
                    printWindow.document.body.innerHTML += pageContent.outerHTML;
                }
                
                loadedPages++;
                
                // Quando tutte le pagine sono caricate, stampa
                if (loadedPages === pages.length) {
                    printWindow.document.write('</body></html>');
                    printWindow.document.close();
                    
                    // Attendi che le risorse siano caricate prima di stampare
                    setTimeout(function() {
                        printWindow.print();
                    }, 1000);
                }
            })
            .catch(error => {
                console.error('Errore nel caricamento di ' + page + ':', error);
                alert('Impossibile caricare ' + page + '. Assicurati che i file siano serviti da un web server locale (es: python -m http.server o Live Server in VSCode)');
                loadedPages++;
                
                // Se tutte le pagine sono state tentate (anche con errori)
                if (loadedPages === pages.length) {
                    printWindow.document.write('</body></html>');
                    printWindow.document.close();
                }
            });
    });
}
</script>
<body>
    <div class="cover-page">
        <div class="cover-content">
            <div class="cover-header">
                <div class="tricolor-bar"></div>
            </div>
            <div class="cover-title">
                <h1>NOSC</h1>
                <h2>Tecniche Tattiche e Procedure</h2>
                <div class="cover-subtitle">
						<ul class="index-list">
							<a href="nosc_index.html">By NOSC Bologna - Get Started</a>
						<ul>
                </div>
            </div>
            <div class="cover-footer">
                <div class="tricolor-bar"></div>
            </div>
        </div>
    </div>
</body>
</html>